version: 2

sources:
  - name: populations
    description: >
      The populations identify groups of students with consistent profiles, such as regular students, students in special education or students in general adult education.
    tags: 
      - population
      - educ_serv
      - prospectif_cdp
      - effectif_css  
    schema: "{{ target.schema }}_educ_serv_staging"
    tables:
      - name: stg_ele_prescolaire
        description: >
          Identification of the population in 4-year-old kindergarten / passe partout / 5-year-old kindergarten.
        columns:
          - name: code_perm
            description: The specific unique identifier for a student
          - name: annee
            description: The years the student was active

      - name: stg_ele_primaire_reg
        description: >
          Identification of the primary school population with a regular course
        columns:
          - name: code_perm
            description: The specific unique identifier for a student
          - name: annee
            description: The years the student was active

      - name: stg_ele_primaire_adapt
        description: >
          Identification of the primary school population with adjustment or learning difficulties
        columns:
          - name: code_perm
            description: The specific unique identifier for a student
          - name: annee
            description: The years the student was active

      - name: stg_ele_secondaire_reg
        description: >
          Identification of the secondary school population with a regular course.
        columns:
          - name: code_perm
            description: The specific unique identifier for a student
          - name: annee
            description: The years the student was active

      - name: stg_ele_secondaire_adapt
        description: >
          Identification of the secondary school population with adjustment or learning difficulties
        columns:
          - name: code_perm
            description: The specific unique identifier for a student
          - name: annee
            description: The years the student was active

models:
  - name: stg_ele_prescolaire
    config:
      schema: "educ_serv_staging"      
      tags:
        - population
        - educ_serv  
    description: >
          Identification of the population in 4-year-old kindergarten / passe partout / 5-year-old kindergarten.
    tests: 
      - resolution: 
          combination_of_columns: 
            - code_perm
            - annee
    columns:
      - name: code_perm
        description: The specific unique identifier for a student
        tests:
            - not_null
      - name: annee
        description: The years the student was active
        tests:
            - not_null
  - name: stg_ele_primaire_reg
    description: >
          Identification of the primary school population with a regular profile.
    config:
      schema: "educ_serv_staging"      
      tags:
        - population
        - educ_serv
    tests: 
      - resolution: 
          combination_of_columns: 
            - code_perm
            - annee
    columns:
      - name: code_perm
        description: The specific unique identifier for a student
        tests:
            - not_null
      - name: annee
        description: The years the student was active
        tests:
            - not_null
  - name: stg_ele_primaire_adapt
    description: >
          Identification of the primary school population enrolled in special education.
    config:
      schema: "educ_serv_staging"      
      tags:
        - population
        - educ_serv
    tests: 
      - resolution: 
          combination_of_columns: 
            - code_perm
            - annee
    columns:
      - name: code_perm
        description: The specific unique identifier for a student
        tests:
            - not_null
      - name: annee
        description: The years the student was active
        tests:
            - not_null
  - name: stg_ele_secondaire_reg
    description: >
          Identification of the secondary school population with a regular profile.
    config:
      schema: "educ_serv_staging"      
      tags:
        - population
        - educ_serv
    tests: 
      - resolution: 
          combination_of_columns: 
            - code_perm
            - annee
    columns:
      - name: code_perm
        description: The specific unique identifier for a student
        tests:
            - not_null
      - name: annee
        description: The years the student was active
        tests:
            - not_null
  - name: stg_ele_secondaire_adapt
    description: >
          Identification of the secondary school population in special education.
    config:
      schema: "educ_serv_staging"      
      tags:
        - population
        - educ_serv
    tests: 
      - resolution: 
          combination_of_columns: 
            - code_perm
            - annee
    columns:
      - name: code_perm
        description: The specific unique identifier for a student
        tests:
            - not_null
      - name: annee
        description: The years the student was active
        tests:
            - not_null