version: 2

models:
  - name: fact_absences_sequence
    description: >
      List the sequence of absences for each student.
      A sequence of absences is a set of consecutives school days with at least one absence for each day.
      A sequence of absences is caracterized by its start date, its end date, and the absences in the sequence.
    tests:
      - resolution:
          combination_of_columns:
            - school_year
            - fiche
            - eco
            - absence_sequence_id
            - category_abs  

  - name: fact_res_bilan_comp
    config:
      tags:
        - res_scolaires
    description: >
      List the competency results of all students
    columns:
      - name: code_perm
        description: Unique ID of the student
      - name: id_eco
        description: Unique ID of the school per year
      - name: annee
        description: The school year
      - name: fiche
        description: Unique ID of the student
      - name: population
        description: Identification of a student within the order of education
      - name: eco
        description: The school dedicated number
      - name: code_ecole
        description: The school number concat with the school name
      - name: ordre_ens
        description: The order of education
      - name: genre
        description: The gender of the student
      - name: plan_interv_ehdaa
        description: Intervention plan
      - name: niveau_scolaire
        description: The grade of the student
      - name: id_mat_ele
        description: Unique ID of the subject per student per year
      - name: mat
        description: Description of the subject
      - name: grp
        description: The group of the student
      - name: etat
        description: The state of the subject
      - name: reprise
        description: Indicate if its a retake
      - name: no_competence
        description: The competency number of the subject
      - name: descr
        description: The description of the subject
      - name: descr_abreg
        description: The description of the subject abbreviated
      - name: res_num_comp
        description: The results of the student per no_competence, per mat
    tests:
      - resolution:
          combination_of_columns:
            - fiche
            - annee
            - eco
            - reprise
            - mat
            - no_competence

  - name: fact_res_bilan_mat
    config:
      tags:
        - res_scolaires
    description: >
      List the result to the subject of all students
    columns:
      - name: code_perm
        description: Unique ID of the student
      - name: id_eco
        description: Unique ID of the school per year
      - name: annee
        description: The school year
      - name: fiche
        description: Unique ID of the student
      - name: population
        description: Identification of a student within the order of education
      - name: eco
        description: The school dedicated number
      - name: code_ecole
        description: The school number concat with the school name
      - name: ordre_ens
        description: The order of education
      - name: genre
        description: The gender of the student
      - name: plan_interv_ehdaa
        description: Intervention plan
      - name: niveau_scolaire
        description: The grade of the student
      - name: id_mat_ele
        description: Unique ID of the subject per student, per year
      - name: mat
        description: Description de la matiÃ¨re
      - name: grp
        description: The group of the student
      - name: etat
        description: The state of the subject
      - name: reprise
        description: Indicate if its a retake
      - name: res_num_mat
        description: The balance sheet results of the student per mat
    tests:
      - resolution:
          combination_of_columns:
            - fiche
            - reprise
            - annee
            - mat

  - name: fact_yearly_student
    config:
      tags:
        - res_scolaires
    description: >

    columns:
      - name: code_perm
        description: Unique ID of the student
      - name: id_eco
        description: Unique ID of the school per year
      - name: annee
        description: The school year
      - name: fiche
        description: Unique ID of the student
      - name: population
        description: Identification of a student within the order of education
      - name: eco
        description: The school dedicated number
      - name: code_ecole
        description: The school number concat with the school name
      - name: ordre_ens
        description: The order of education
      - name: niveau_scolaire
        description: The grade of the student
    tests:
      - resolution:
          combination_of_columns:
            - code_perm
            - id_eco
            - annee
            - population
