version: 2

models:
  - name: rslt_stg_resultats
    description: >
      A stagging table to track the results for the courses identified in the dim_tracked_courses table.
    tests:
      - resolution:
          combination_of_columns:
            - fiche
            - annee
            - course_code

  - name: rslt_stg_spine
    description: >
      A stagging table to track all the students/years we want to track the result for.
    tests:
      - resolution:
          combination_of_columns:
            - fiche
            - annee
            - niveau_scolaire

  - name: rslt_fact_resultats
    description: >
      A fact table tracking the grades obtained in critical courses by students in difficulty.
      A student is in difficulty if he/she failed in at least one (critical) course in the 4 previous years.
    tests:
      - resolution:
          combination_of_columns:
            - annee
            - fiche
            - niveau_scolaire
            - course_code
    columns:
      - name: resultat
        tests:
          - not_null

  - name: rslt_report_resultats
    description: >
      The reporting table combine the data from the results tables to the dimension tables to produce the final report table for the report.
    tests:
      - resolution:
          combination_of_columns:
            - annee
            - fiche
            - niveau_scolaire
            - course_code
    columns:
      - name: status
        tests:
          - not_null
      - name: resultat
        tests:
          - not_null

  - name: rslt_dim_eleve
    description: >
      The table gather some eleve-year information. The fields from this table are later used to add filtering capabilities to the dashboard.
    tests:
      - resolution:
          combination_of_columns:
            - annee
            - fiche
