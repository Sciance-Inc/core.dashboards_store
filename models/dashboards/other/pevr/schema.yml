version: 2

models:
  - name: pevr_dim_indicateurs
    description: >
      Table de dimension qui mappe les indicateurs communs avec les indicateurs personalisés.
      La table est constuite en unionant la dimension commune (core/seeds/pevr/indicateurs_pevr_cdpvd.csv) et la dimension personalisée (cssss/seeds/pevr/custom_indicateurs_pevr_cdpvd.csv).
      La table `custom` peut-etre adaptée pour chaque CSS pour rajouter des indicateurs.
    columns:
      - name: id_indicateur_cdpvd
        description: Identifiant unique crée par la cdpvd.
      - name: id_indicateur_css
        description: Identifiant unique optionel crée par la CSS.
      - name: description_indicateur
        description: Description de l'indicateur, soit crée par la cdpvd ou par la CSS.
      - name: code_matiere
        description: Code la matière. Ex -> 132508 (Français secondaire 5)
      - name: no_competence
        description: Numéro de la compétence.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - id_indicateur_cdpvd
            - id_indicateur_css

  - name: pevr_dim_cibles_annuelles
    description: >
      Table de dimension qui mappe les données prévisionnelles.
      La table est constuite en unionant la dimension commune (core/seeds/pevr/cibles_indicateurs_annuelles_pevr_cdpvd.csv) et la dimension personalisée (cssss/seeds/pevr/custom_cibles_indicateurs_annuelles_pevr_cdpvd.csv).
    columns:
      - name: objectif
        description: L'objectif de l'indicateur, en référence au PEVR
      - name: id_indicateur
        description: Un indicateur unique de l'indicateur
      - name: annee_scolaire
        description: L'année scolaire
      - name: cible
        description: La cible qu'on veut atteindre (%)
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - id_indicateur
            - annee_scolaire

  - name: pevr_filtres
    description: >
        Table qui contient les combinaisons possibles des filtres pour la liaison des tables de données par rapport à la table de filtre.

  - name: pevr_indicateur_epreuves
    description: >
      Proportion d'élèves qui obtiennent entre 70% et 100% à l'épreuve  obligatoire.
      **Code matière et no_compétence modifiable**
      Donnée provenant des BD locaux.
      Indicateur '4' de la cpdvd
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - annee_scolaire
            - id_indicateur
            - id_filtre

  - name: pevr_indicateurs_ppp
    description: liste des indicateurs du pevr lié aux projets pédagogiques particuliers.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - annee_scolaire
            - id_indicateur
            - id_filtre